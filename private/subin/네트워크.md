---

mindmap-plugin: basic

---

# 네트워크

## OSI 7계층 ^a4d61655-00e8-60cd
- 응용계층
   - 무엇을 하는가?
      - 응용 계층(Application layer)은 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행
      - 모든 통신의 양 끝단은 HTTP와 같은 프로토콜이지 응용프로그램이 아니다
      - 최종목적지로 HTTP, FTP, SMTP, POP3, IMAP, Telnet 등과 같은 프로토콜이 있음
- 표현계층
   - 무엇을 하는가?
      - 데이터 표현이 상이한 응용 프로세스의 독립성을 제공하고, 암호화
         - MIME 인코딩이나 암호화 등의 동작
- 세션계층
   - 무엇을 하는가?
      - 데이터가 통신하기 위한 논리적인 연결
         - 4계층에서도 연결을 맺고 종료할 수 있기 때문에 우리가 어느 계층에서 통신이 끊어 졌나 판단하기는 한계가 있다.
      - TCP/IP 세션을 만들고 없애는 책임을 진다
         - 운영체제가 해줌
- 전송계층
   - 무엇을 하는가?
      - TCP
         - IP의 비신뢰 서비스에 신뢰적인 연결지향성 서비스를 제공
         - 신뢰적인 전송을 보장
            - 패킷 손실, 중복, 순서바뀜 등이 없도록 보장
      - UDP
         - 신뢰성이 낮은 프로토콜
         - 비연결성이고, 신뢰성이 없으며, 순서화되지 않은 Datagram 서비스 제공
            - 메세지가 제대로 도착했는지 확인하지 않음 (확인응답 없음)
            - 수신된 메세지의 순서를 맞추지 않음 (순서제어 없음)
            - 흐름 제어를 위한 피드백을 제공하지 않음 (흐름제어 없음)
            - 검사합을 제외한 특별한 오류 검출 및 제어 없음 (오류제어 거의 없음)
            - UDP를 사용하는 프로그램 쪽에서 오류제어 기능을 스스로 갖추어야 함
               - 데이터그램 지향의 전송계층용 프로토콜 (논리적인 가상회선 연결이 필요없음)
         - 장점
            - 빠른 요청과 응답이 필요한 실시간 응용에 적합
            - 여러 다수 지점에 전송 가능 (1:N)
            - 헤더가 단순함
- 네트워크계층
   - 무엇을 하는가?
      - 주소부여(IP)
         - 네트워크 주소 정의
      - IP 패킷 전달
      - 라우팅 기능(경로설정-Route)
         - 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능
      - 데이터를 연결하는 다른 네트워크를 통해 전달함으로써 인터넷이 가능하게 만드는 계층
   - 대표 장비
      - 라우터
      - Layer3 스위치
         - 스위치 + 라우팅기능
- 데이터링크계층
   - 무엇을 하는가?
      - 브릿지나 스위치를 통해 맥주소를 가지고 물리계층에서 받은 정보를 전달함
      - 물리계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할
      - 에러검출/재전송/흐름제어
         - CRC(순환중복검사) 기반
            - 네트워크를 통해 데이터를 전송할 때 전송된 데이터에 오류가 있는지를 확인하기 위한 체크값 결정 방식
      - 프레임에 주소부여(MAC)
   - 통신 단위
      - 프레임
   - 대표 장비
      - 브릿지
      - 스위치
- 물리계층
   - 무엇을하는가?
      - 주로 전기적, 기계적, 기능적인 특성을 이용해서 통신 케이블로 데이터를 전송
      - 단지 데이터를 전달만 수행
      - 전송하려는(또는 받으려는)데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경 쓰지 않는다.
   - 통신 단위
      - 비트(on/off)
   - 대표 장비
      - 통신 케이블
      - 리피터
      - 허브
- 참고
   - https://shlee0882.tistory.com/110

## TCP/IP 4계층 ^57b64390-2718-ab4a
- 응용계층
   - 응용/표현/세션
      - HTTP
      - FTP
      - SMTP
      - DNS
   - 장비
      - 게이트웨이
- 전송계층
   - 전송
      - TCP/UDP
- 인터넷계층
   - 네트워크계층
      - IP
         - 패킷의 전달을 책임
      - ARP/RARP
         - Address Resolution Protocol
            - 네트워크 상에서 IP 주소를 물리적 네트워크 주소로 대응(bind)시키기 위해 사용되는 프로토콜
      - ICMP
         - 패킷 전달 에러의 보고 및 진단
- 네트워크 인터페이스 계층
   - 데이터링크/물리 계층
      - Ethernet
      - ATM

## 프로토콜이란? ^94952cb0-a527-5783
- 규약
   - 장비들간의 통신 규약
- 호환성
- 각계층간 표준 - OSI `참조`모델
   - 실제로 이걸 완전히 따르지 않고, TCP/IP 구조를 따른다
- TCP/IP 구조
   - OSI 참조모델에서 위에 3개 계층(응용, 표현, 세션)을 합쳐 응용계층, 아래 2개 계층(데이터링크, 물리)을 합쳐 네트워크 인터페이스 계층이라고 하고, 중간에 2개 계층을 위에서 부터 전송계층, 인터넷 계층이라고 부른다. 인터넷 계층은 OSI모델에서의 네트워크 계층을 말한다.

## TCP vs UDP
- 전송계층 주요 프로토콜
   - 연결형 통신
   - 비연결형 통신
- TCP
   - TCP란?
      - 신뢰성과 정확성을 우선으로 하는 연결형 통신 프로토콜인 TCP
   - TCP 헤더
      - 목적지까지 데이터를 제대로 전송하기 위해 필요한 정보를 가지고 있음
      - 구성
         - 출발지포트번호, 목적지포트번호
         - 일련번호, 확인응답번호
         - 헤더길이, 예약영역, 코드비트, 윈도우크기
         - 체크섬, 긴급 포인터
         - 옵션
   - 단위
      - 세그먼트
         - TCP 헤더가 붙은 데이터
   - 연결
      - 가상의 독점 통신로를 확보해야 함
         - 가상회선
            - 논리적 경로 - 발신지와 수신지를 연결해 패킷을 전송하기 위한
         - TCP 헤더의 코드비트 부분의 syn(씬), ack(앸)
      - 3way handshake
         - SYN SYNACK ACK
            - 신뢰할 수 있는 연결을 하려면 데이터 전송 전에 패킷 3회 교환
   - 데이터 전송
      - 일련번호
         - 이 데이터가 몇번째 데이터인지
      - 확인응답번호
         - 수신측이 몇번째 데이터를 수신했는지
      - 이 둘을 사용해 데이터가 손상되거나 유실된 경우 데이터를 재전송하게 됨
         - 재전송 제어
         - 오류 발생시 대기한 후에 재 전송하는 것
      - segment를 연속해서 보내고 확인응답을 반환하면 효율이 높아진다
         - 세그먼트를 일시적으로 보관하는 장소 - 버퍼
         - 이 버퍼의 한계 크기가 윈도우 크기
         - 3way handshake 과정에서 알게된다
   - 종료
      - 4way handshake
         - FIN ACK FIN ACK
            - 연결 종료시에는 FIN, ACK를 사용
   - 흐름제어 & 혼잡제어 & 재전송제어
      - 흐름제어
         - 수신측과 송신측 사이 데이터 처리 속도 차이를 해결하기 위한 기법
         - Stop & wait
            - 기다렸다가 다음 패킷을 전송하는 방법
         - sliding window
            - 수신측에서 설정한 윈도우 크기만큼 송신측에서 확인없이 세그먼트 전송 가능
      - 혼잡제어
         - 네트워크 내에 패킷의 수가 과도하게 증가하는 현상을 혼잡이라 하며,
            혼잡 현상을 방지하거나 제거하는 기능을 혼잡제어라고 한다
         - 데이터의 전송속도를 강제로 줄인다
            - AIDM(Additive Increase / 윈도우크기 1씩증가  Multiplicative Decrease /패킷전송속도 절반으로줄인다)
            - Slow Start
               - 1씩증가, 그러나 혼잡현상 발생시 윈도우 크기 1로 떨어트린다
            - Fast recovery
               - 혼잡상태시 윈도우 크기를 반으로만 줄임
            - Fast Retransmit (빠른재전송)
               - 타임아웃전에도 중복된 ACK 패킷 3개 이상이면 혼잡상황이라 판단하고 window size를 줄인다
               - 4 5 6 보내고 4에서 실패하면 4 4 4 보냄
      - 재전송제어
         - 데이터가 손실. 유실되었을 경우 데이터 재전송하는것
- UDP
   - UDP란?
      - 전송계층 프로토콜로, 데이터를 데이터그램 단위로 처리하는 비연결형 프로토콜입니다.
   - UPD헤더
      - 구성
         - 출발지 포트번호, 목적지포트번호
         - 길이, 체크섬
      - 동작
         - 브로드캐스트
            - 랜에 있는 컴퓨터나 장비에 데이터 일괄로 보낼 수 있음
- IP의 역할은 장치 to 장치였는데, 수많은 프로그램들이 통신할때에는 IP 만으로는 한계가 있었음
   - 그래서 포트번호가 나옴
- 유니캐스트/브로드캐스트/멀티캐스트/애니캐스트
   - 유니캐스트
      - 출발지-목적지가 정확해야 하는 일대일 통신
   - 브로드캐스트
      - 같은 네트워크에 있는 모든 장비들에게 보내는 통신
   - 멀티캐스트
      - 송신노드 하나가 네트워크에 연결된 하나 이상의 수신노드에 데이터를 전송
   - 애니캐스트
      - 가장 가까운 노드와 통신하는 방식
- IPv4 vs IPv6
   - IPv4
      - 유니캐스트/멀티캐스트 + 브로드캐스트
      - 32비트의 40억개의 주소(2^32)로 구성
      - 보안 IPsec 프로토콜 별도 설치
      - Auto configuration 없음
      - 품질 보장 곤란 (QoS 일부 지원)
         - Sub title
   - IPv6
      - 유니캐스트/멀티캐스트 + 애니캐스트
      - IPv4 어드레스가 고갈될 것으로 예측
      - IPv6주소는 128비트체계로 구성
         - 최대 1조개 이상(2^128)을 마련
      - 28비트를 16비트씩 8부분으로 나누어 각 부분을 콜론(colon, "":"")으로 구분하여 표현하며,
         각 구분은 16진수로 표현
      - 등급별, 서비스별로 패킷을 구분할 수 있어 품질 보장 용이