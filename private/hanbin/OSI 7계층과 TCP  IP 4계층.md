# OSI 7계층과 TCP / IP 4계층

## OSI 7계층

| OSI 7 Layer        | 국문명          | PDU; Process Data Unit |
| ------------------ | --------------- | ---------------------- |
| Application Layer  | 응용 계층       | Data                   |
| Presentation Layer | 표현 계층       | Data                   |
| Session Layer      | 세션 계층       | Data                   |
| Transport Layer    | 전송 계층       | Segments               |
| Network Layer      | 네트워크 계층   | Packets                |
| Data-Link Layer    | 데이터링크 계층 | Frames                 |
| Phisical Layer     | 물리 계층       | Bits                   |

- Open System Iterconnection
  - 네트워크에서 통신이 일어나는 과정
  - 계층이 올라갈 때마다 헤더가 붙음



- 물리 계층
  - 0과 1의 데이터 통신
  - 신호는 이산적으로 끊을 수 없음, 아날로그 신호를 전달하게 됨
  - encoding
    - 0과 1의 나열을 아날로그 신호로 바꾸어 전선으로 흘려 보냄
  - decoding
    - 아날로그 신호를 0과 1의 나열로 해석
  - 물리 계층은 물리적으로 연결된 두 대의 컴퓨터가 0과 1의 나열을 주고받을 수 있게 해주는 모듈
  - 하드웨어로 구현 
- 막간: 컴퓨터 간 통신의 이해
  - 스위치
    - 메시지의 목적지를 확인하여 그 대상에게 전달시켜줌
    - 하나의 스위치로 연결되어 있는 인트라넷, 네트워크
  - 라우터
    - 스위치와 스위치를 연결하여 서로 다른 네트워크의 컴퓨터 사이의 통신이 가능하게 해줌
    - 인터넷
      - 라우터와 라우터를 연결할 수도 있음 -> 이런 식으로 전세계의 컴퓨터를 연결한 것
    - 라우팅: 목적지를 찾는 방법

- 데이터 링크 계층
  - 동 네트워크 내 다수 컴퓨터가 데이터를 주고받기 위해 필요
  - MAC 주소 통신
    - 물리적 주소
  - Framing
    - 각 데이터를 구별해줘야 함
  - LAN카드에 구현
- 네트워크 계층
  - IP 주소
    - 각 컴퓨터들이 갖는 고유한 주소
  - 패킷
    - 데이터에 IP주소 추가
  - inter-network 속에서 목적지로 데이터를 전송하기 위해
  - IP 주소로 길을 찾고(routing)
  - 자신 다음의 라우터에게 데이터를 넘김(forwarding)
  - 커널에 소프트웨어적으로 구현
- 전송 계층
  - 포트 번호
    - 어떤 데이터를 어느 프로세스에 줘야 할지를 해결
    - 송신자는 포트 번호를 붙여서 데이터를 보냄
  - 포트 번호를 이용하여 도착지 컴퓨터의 최종 도착지인 프로세스까지 데이터가 도달하게 만드는 모듈
  - 커널에 소프트웨어적으로 구현
  - 주로 TCP / UDP 사용
- 세션 계층
  - 통신 장치 간 상호작용, 동시화
  - 에러 발생시 복구
  - OS
- 표현 계층
  - 데이터 형식
  - 데이터 인코딩 / 디코딩
  - 암복호화 / 압축 및 해제
  - XML / JSON
- 응용 계층
  - 사용자가 접하는 계층
  - HTTP, FTP 등등
    - FTP 파일
    - SSH 쉘 관련 통신
- OSI vs TCP / IP 모델
  - 현대 인터넷은 TCP / IP 모델을 따름
  - TCP / IP 모델(Updated)의 경우
    - Application
      - Application / Presentation / Session이 뭉뚱그러짐
    - Transport
    - Network
    - Data Link
    - Physical



## TCP / IP

- TCP 세그먼트
  - 출발지 PORT
  - 목적지 PORT
  - 전송제어, 순서 보장, 검증정보 등
    - 패킷 누락시 인지
  - 연결 지향: 3Way HandShake



### 인터넷 프로토콜 스택의 사계층

1. 애플리케이션 계층 - HTTP, FTP
2. 전송 계층 - TCP, UDP
3. 인터넷 계층 - IP
4. 네트워크 인터페이스 계층

- 메시지 전달 사례
  - 애플리케이션
    1. 프로그램이 "Hello, world!" 메시지 생성(HTTP)
    2. SOCKET 라이브러리를 통해 전달
  - OS
    3. TCP 정보 생성, 메시지 데이터 포함(HTTP + TCP)
    4. IP 패킷 생성, TCP 데이터 포함(HTTP + TCP + IP)
  - 네트워크 인터페이스
    5. LAN카드를 통해서 인터넷으로 나감(HTTP + TCP + IP + Ethernet frame)
       - 이더넷 프레임: MAC 주소 등 물리적인 정보를 포함



### UDP

- User Datagram Protocol
- 전달 및 순서 보장 없음
- 단순하고 빠름
- 애플리케이션에서 커스텀 가능
- HTTP3의 경우 UDP 사용



# 진행 중 추가 내용

- 주소창에 주소를 입력했을 떄 발생하는 일?
- DNS와 통신해서 IP 주소를 먼저 얻어오지 않나?
- 뭉개져 있는 내용임

- 데이터 링크 계층에서는 체크값(CRC) 확인하여 데이터가 제대로 전달되었는가를 검사함
  - CRC 검사는 여러 계층에서 수행할 수 있음
  - 순환 중복 검사를 계산하는 과정은 하드웨어적 방식과 소프트웨어적 방식을 생각할 수 있다. 하드웨어적 방식을 말할 때, 직렬데이터를 계산하는 것이 단순하다. 통신시스템에서 프로토콜 계층에서 물리층에 가까울수록 하드웨어 접근을 그리고 상위계층에 가까울수록 소프트웨어적인 방식이 적용된다.
- L2스위치 vs L3스위치
  - L2스위치: 데이터 링크 계층
    - 같은 네트워크에 속한 노드들의 연결을 책임
    - 특정 IP 주소를 MAC 주소로 변환
  - L3스위치: 네트워크 계층
    - IP주소를 받아서 다른 스위치로 포워딩하는 기능
  - 라우팅 기능의 유무!
  - L4의 경우 로드밸런싱 기능까지
  - 공유기의 브릿지모드
- OSIV / OSI

- TCP와 UDP는 연결형 / 비연결형으로도 구별해볼 수 있겠음
  - TCP: 연결형
  - UDP: 비연결형
  - UDP는 헤더자리가 남아서 커스텀하기 쉬움