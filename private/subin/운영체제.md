---

mindmap-plugin: basic

---

# 운영체제

## 프로세스 vs 스레드
- 정리
   - 자원은 Process 단위로 받고, 작업/스케줄링은 Thread 단위로 진행
   - 여기서 핵심은 컨텍스트 스위칭 비용을 줄이기 위해서인듯?!!!!
      - 코드, 힙, 데이터 영역을 공유해서.
      - 스레드도 컨텍스트 스위칭을 하지만, 프로세스 컨텍스트 스위칭보다 매우 짧게 가져갈 수 있다
   - 동시성 문제가 발생할 수 잇음
- 프로세스
   - 개념
      - 프로세서에 의해 동작하고 있는 프로그램
         - 프로세스가 동작한다는 것은 프로세스의 특정 스레드가 실행중
         - 그 특정 스레드는 프로세스가 가진 데이터를 참조함
   - 제어블록
      - 프로세스 식별자
      - 프로세스 상태
      - 프로그램카운터
      - CPU 스케줄링 정보
      - 기타 등등..
   - Context Switching
      - 한 프로세스에 할당 된 시간이 끝나거나 인터럽트에 의해 발생한다
   - 프로그램 vs 프로세스
      - 프로그램
         - 저장장치에 저장되어 있는 정적인 상태
         - 레시피
      - 프로세스
         - 실행을 위에 메모리에 올라온 동적인 상태
         - 요리
   - 프로세스의 다섯가지 상태
      - 생성
      - 준비
      - 실행
      - 대기
      - 완료
   - 구조
      - 스택
         - 호출된 함수, 지역변수 등 임시 데이터
      - 힙
         - 동적으로 생긴 데이터
      - 데이터
         - 전역변수 (static, global 등)
      - 코드
         - 프로그램 코드
- 스레드
   - 개념
      - 프로세스의 코드에 정의된 절차에 따라 CPU에 작업 요청을 하는 실행 단위이다
      - 프로세스 내에서 실행되는 작업 흐름의 단위
   - 멀티스레드 구조
   - 멀티스레드 장단점
   - 멀티프로세스 vs 멀티스레드
      - 멀티스레드
         - 프로세스 내 작업을 여러개의 스레드로 분할하여 작업의 부담을 줄이는 `프로세스 운영 기법`
      - 멀티프로세스
         - CPU를 여러개 사용하여 여러 개의 스레드를 동시에 처리하는 작업환경
   - 스프링에서의 Thread Pool
      - Tomcat은 위에서의 다중 요청을 처리하기 위해서 Thread Pool 전략을 사용한다
      - 작업 시 Thread Pool에서 가져가 사용하고, Thread 자원을 해제하는 것이 아닌 Thread Pool에 다시 반납한다
      - server.tomcat.threads.min-spare: 10
         - 아무 작업이 없어도 활성화 되어 있는 Thread 개수
      - server.tomcat.accept-count: 100
         - 요청 대기하는 큐의 크기
- 차이
   - 멀티 프로세스를 하게 된다면,
      - 컨텍스트스위칭 시에 스택, 힙, 데이터, 코드를 모두 재로딩을 해야하고
      - 같은 작업을 하기 위해 만든 프로세스인데 각 영역을 따로 가지기 때문에,
         다른 프로세스의 정보를 사용하기 위해 통신(IPC)이 필요하게 된다
      - 코드 힙 데이터 영역을 공유하고, 이제 스레드에서는 각 Stack만을 포함한다
   - 리눅스 커널에서는 프로세스와 스레드를 동일하게 본다
      - 스레드는 사용자 스레드와 커널 스레드로 나뉜다